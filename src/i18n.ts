import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

const resources = {
  en: {
    translation: {
      title: 'Dataset Annotation Program',
      help: 'Help',
      localFirst: 'Local-First',
      language: '中文/EN',
      manualMode: 'Manual Mode',
      agentMode: 'LLM Agent Mode',
      llmConfig: 'LLM Configuration',
      mode: 'Mode',
      settingsBlock: 'Settings',
      problemsBlock: 'Problems',
      apiKey: 'API Key',
      baseUrl: 'Base URL (required)',
      model: 'Model',
      provider: 'Provider',
      provider_openai: 'OpenAI-compatible',
      provider_gemini: 'Gemini',
      provider_claude: 'Claude',
      save: 'Save',
      saved: 'Saved',
      problemText: 'Problem Text',
      uploadImage: 'Upload image to auto-extract text',
      ocrExtract: 'Auto recognize text in image',
      confirmText: 'Confirm Text',
      targetType: 'Target Problem Type',
      type_mc: 'Multiple Choice',
      type_fitb: 'Fill-in-the-blank',
      type_proof: 'Proof',
      type_hint: 'It is better not to include proof questions for now. They can be collected later in bulk without manual annotation.',
      generate: 'Generate with LLM',
      latexFix: 'LaTeX Correction',
      latexFixHint: 'This will convert nonstandard symbols (e.g., ℤ) into LaTeX (e.g., \\mathbb{Z}).',
      subfield: 'Subfield',
      subfield_others: 'Others (custom)',
      source: 'Source',
      academic: 'Academic Level',
      k12: 'K12',
      professional: 'Professional',
      difficulty: 'Difficulty (1=easy, 3=hard)',
      options: 'Options',
      answer: 'Answer / Solution',
      imageBlock: 'Images',
      singleBlock: 'Single-image block',
      optionBlock: 'Option-image block (A–E)',
      addBlock: 'Add Block',
      compose: 'Compose Image',
      preview: 'Preview',
      regenerate: 'Regenerate',
      confirmImage: 'Confirm Image',
      imageAttached: 'Image attached',
      exportXlsx: 'Export XLSX',
      exportDatasets: 'Export Datasets',
      exportImages: 'Export Images',
      importXlsx: 'Import XLSX',
      importXlsxFolder: 'Import XLSX (Folder)',
      importSuccess: 'Imported successfully, total {{count}} rows',
      importXlsxHint: 'Drag & drop .xlsx files or folders to import',
      importImages: 'Import Images',
      importImagesHint: 'Drag & drop image files or folders to import (filenames: <id>.jpg)',
      importImagesSuccess: 'Imported images successfully, total {{count}} images',
      storage: 'Storage',
      usage: 'Usage',
      quota: 'Quota',
      notAvailable: 'N/A',
      clearCache: 'Clear Cache',
      resultLabel: 'Result',
      prev: 'Previous',
      next: 'Next',
      helpTitle: 'Program Overview',
      helpError: 'Help content failed to render. Please close this dialog.',
      newProblem: 'New Problem',
      saveProblem: 'Save Problem',
      selectSubfieldHint: 'Select multiple subfields; they will be joined with semicolons.',
      testLLM: 'Test LLM',
      yourMessage: 'Your message',
      send: 'Send',
      llmReply: 'LLM Reply',
      llmError: 'LLM Error',
      llmMissingTitle: 'LLM configuration required',
      llmMissingBody: 'Please enter API Key, Model, and Base URL in the LLM Configuration.',
      openLLMConfig: 'Open LLM Configuration',
      dismiss: 'Dismiss',
      browse: 'Browse',
      folder: 'Folder',
      dragDropOrPaste: 'Drag & drop or paste screenshot',
      dragDropOrChooseImage: 'Drag & drop or choose an image',
      dragDropMultipleOrPickFolder: 'Drag & drop multiple images (A–E) or pick a folder',
      viewLarge: 'View large',
      back: 'Back'
      , zoomHint: 'Ctrl + Wheel to zoom • Drag to pan • Double-click to reset'
    }
  },
  zh: {
    translation: {
      title: '数据集标注程序',
      help: '帮助',
      localFirst: '本地优先',
      language: '中文/EN',
      manualMode: '手动模式',
      agentMode: 'LLM 代理模式',
      llmConfig: 'LLM 配置',
      mode: '模式',
      settingsBlock: '设置',
      problemsBlock: '题目',
      apiKey: 'API Key（仅保存在本地）',
      baseUrl: 'Base URL（必填）',
      model: '模型',
      provider: '服务商',
      provider_openai: 'OpenAI 兼容',
      provider_gemini: 'Gemini',
      provider_claude: 'Claude',
      save: '保存',
      saved: '已保存',
      problemText: '题目文本',
      uploadImage: '上传图片以自动提取文字',
      ocrExtract: '自动识别图中文字',
      confirmText: '确认文本',
      targetType: '目标题型',
      type_mc: '选择题',
      type_fitb: '填空题',
      type_proof: '证明题',
      type_hint: '目前不建议包含证明题，后续可从题库批量收集。',
      generate: '使用 LLM 生成',
      latexFix: 'LaTeX 纠正',
      latexFixHint: '该操作会把非标准符号（如 ℤ）转换为合法 LaTeX（如 \\mathbb{Z}）。',
      subfield: '分支领域',
      subfield_others: '其他（自定义）',
      source: '来源',
      academic: '学术水平',
      k12: 'K12',
      professional: '专业',
      difficulty: '难度（1=最易，3=最难）',
      options: '选项',
      answer: '答案 / 解答',
      imageBlock: '图片',
      singleBlock: '单图块',
      optionBlock: '选项图块（A–E）',
      addBlock: '添加图片块',
      compose: '合成图片',
      preview: '预览',
      regenerate: '重新生成',
      confirmImage: '确认图片',
      imageAttached: '已添加图片',
      exportXlsx: '导出 XLSX',
      exportDatasets: '导出数据集',
      exportImages: '导出图片',
      importXlsx: '导入 XLSX',
      importXlsxFolder: '导入 XLSX（文件夹）',
      importSuccess: '读取成功，共有{{count}}条数据',
      importXlsxHint: '拖拽 .xlsx 文件或文件夹导入',
      importImages: '导入图片',
      importImagesHint: '拖拽图片文件或文件夹导入（文件名需为ID.jpg）',
      importImagesSuccess: '读取成功，共{{count}}张图片',
      storage: '存储',
      usage: '已用',
      quota: '配额',
      notAvailable: '不可用',
      clearCache: '清理缓存',
      resultLabel: '结果',
      prev: '上一题',
      next: '下一题',
      helpTitle: '功能概览',
      helpError: '帮助内容渲染失败，请关闭此对话框。',
      newProblem: '新建题目',
      saveProblem: '保存题目',
      selectSubfieldHint: '可多次选择多个分支领域，最终以分号拼接。',
      testLLM: '测试 LLM',
      yourMessage: '你的消息',
      send: '发送',
      llmReply: 'LLM 回复',
      llmError: 'LLM 错误',
      llmMissingTitle: '需要配置 LLM',
      llmMissingBody: '请在 LLM 配置中填写 API Key、模型与 Base URL。',
      openLLMConfig: '打开 LLM 配置',
      dismiss: '关闭',
      browse: '选择文件',
      folder: '文件夹',
      dragDropOrPaste: '拖拽或粘贴截图',
      dragDropOrChooseImage: '拖拽或选择图片',
      dragDropMultipleOrPickFolder: '拖拽多张图片（A–E）或选择文件夹',
      viewLarge: '看大图',
      back: '返回',
      zoomHint: '按住 Ctrl 滚轮缩放 • 拖拽平移 • 双击重置'
    }
  }
};

export function initI18n() {
  const saved = typeof window !== 'undefined' ? (localStorage.getItem('lang') || 'en') : 'en';
  return i18n
    .use(initReactI18next)
    .init({
      resources,
      lng: saved,
      fallbackLng: 'en',
      interpolation: { escapeValue: false }
    });
}

export default i18n;
